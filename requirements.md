# アーユルヴェーダ診断アプリ - 要件定義書 v2

## プロジェクト概要
単一HTMLファイルで動作する、アーユルヴェーダ体質診断（プラクリティ診断）アプリケーション。
従来の3問構成から、身体的・生理的・精神的・行動的な15カテゴリの質問に拡充し、
より正確なドーシャ判定を行う。

GitHubリポジトリとして管理し、Vercelでホスティングする。

## 技術スタック
- HTML5
- CSS3
- Vanilla JavaScript（フレームワーク不使用）
- ホスティング: Vercel
- バージョン管理: GitHub

## ファイル構成
```
/
├── index.html         # 単一HTMLファイル（HTML/CSS/JS全て含む）
├── requirements.md    # 要件定義書
├── README.md          # プロジェクト説明
└── .gitignore         # 不要ファイル除外（任意）
```

---

## 機能要件

### 1. 入力機能

#### 1.0 自動取得情報
- 現在の季節: JavaScriptのDate()から月を取得し判定
  - 春: 3〜5月
  - 夏: 6〜8月
  - 秋: 9〜11月
  - 冬: 12〜2月
- 現在の時間帯: JavaScriptのDate()から時刻を取得し判定
  - 朝: 5〜9時
  - 昼: 10〜16時
  - 夕: 17〜20時
  - 夜: 21〜4時
- 画面上部に表示（例: 「現在の季節: 冬 / 現在の時間帯: 朝」）

#### 1.1 診断質問（15カテゴリ・全て必須）

各質問は3択形式。それぞれの選択肢がヴァータ/ピッタ/カパに対応する。
ユーザーには「A / B / C」として表示し、ドーシャ名は見せない。

---

**カテゴリ1: 体格・骨格**
- 質問文: 「あなたの体型に最も近いものは？」
- A（ヴァータ）: 細身で華奢、骨ばっている。体重が増えにくい
- B（ピッタ）: 中肉中背で均整がとれている。筋肉がつきやすい
- C（カパ）: がっしり・ふくよかで骨太。体重が増えやすい

**カテゴリ2: 肌の質感**
- 質問文: 「あなたの肌の状態に最も近いものは？」
- A（ヴァータ）: 乾燥しやすく、冷たい。かさつきやすい
- B（ピッタ）: 敏感で温かく、赤みやニキビができやすい
- C（カパ）: しっとり滑らかで、脂っぽくなりやすい

**カテゴリ3: 髪の質**
- 質問文: 「あなたの髪質に最も近いものは？」
- A（ヴァータ）: 細くて乾燥しやすい。くせ毛やパサつきがある
- B（ピッタ）: 細くて柔らかい直毛。白髪や薄毛になりやすい
- C（カパ）: 太くて豊かでしっとり。量が多くツヤがある

**カテゴリ4: 目**
- 質問文: 「あなたの目の特徴に最も近いものは？」
- A（ヴァータ）: 小さめで乾きやすい。まばたきが多い
- B（ピッタ）: 鋭い印象で充血しやすい。光に敏感
- C（カパ）: 大きくて潤いがある。まつ毛が長い

**カテゴリ5: 消化力**
- 質問文: 「あなたの消化の特徴に最も近いものは？」
- A（ヴァータ）: 不規則で、ガスが溜まりやすい。便秘気味
- B（ピッタ）: 旺盛で消化が速い。空腹を我慢できない
- C（カパ）: ゆっくり安定している。食後に重く感じやすい

**カテゴリ6: 体温の傾向**
- 質問文: 「体温や温度の好みについて最も近いものは？」
- A（ヴァータ）: 寒がりで冷え性。温かい場所が好き
- B（ピッタ）: 暑がりで体が熱い。涼しい場所が好き
- C（カパ）: やや寒がりで湿気に弱い。乾燥した暖かさが好き

**カテゴリ7: 汗のかきやすさ**
- 質問文: 「汗のかき方に最も近いものは？」
- A（ヴァータ）: 汗をかきにくい。肌が乾燥している
- B（ピッタ）: 汗をかきやすく、体臭が気になることがある
- C（カパ）: 適度に汗をかくが、冷たい汗をかくことがある

**カテゴリ8: 睡眠パターン**
- 質問文: 「あなたの睡眠の特徴に最も近いものは？」
- A（ヴァータ）: 浅く不規則。寝つきが悪く途中で目が覚める
- B（ピッタ）: 中程度の深さ。夢を多く見る。暑くて目が覚めることがある
- C（カパ）: 深くて長い。寝起きが悪くもっと寝たい

**カテゴリ9: 活動パターン**
- 質問文: 「普段の行動パターンに最も近いものは？」
- A（ヴァータ）: 素早くて変化が多い。複数のことを同時にやりがち
- B（ピッタ）: 計画的で効率的。目標に向かって集中する
- C（カパ）: ゆっくりで安定。一つのことをコツコツ続ける

**カテゴリ10: 精神傾向（思考パターン）**
- 質問文: 「あなたの思考の特徴に最も近いものは？」
- A（ヴァータ）: 創造的でアイデアが次々浮かぶが、気が散りやすい
- B（ピッタ）: 分析的で論理的。集中力が高く判断が速い
- C（カパ）: 穏やかで落ち着いている。記憶力が良く忘れにくい

**カテゴリ11: 感情傾向（ストレス時の反応）**
- 質問文: 「ストレスを感じたとき、最もよくある反応は？」
- A（ヴァータ）: 不安や恐れを感じ、落ち着かなくなる
- B（ピッタ）: イライラや怒りを感じ、攻撃的になる
- C（カパ）: 引きこもりがちになり、無気力・憂鬱になる

**カテゴリ12: 話し方**
- 質問文: 「あなたの話し方に最も近いものは？」
- A（ヴァータ）: 速くて話題が飛びやすい。ジェスチャーが多い
- B（ピッタ）: 明瞭で説得力がある。論理的に話す
- C（カパ）: ゆっくりで穏やか。落ち着いたトーンで話す

**カテゴリ13: 食欲**
- 質問文: 「あなたの食欲のパターンに最も近いものは？」
- A（ヴァータ）: 不規則でムラがある。食べ忘れることがある
- B（ピッタ）: 旺盛で食事を抜くとイライラする
- C（カパ）: 安定していて、食事を抜いても平気

**カテゴリ14: 味の好み**
- 質問文: 「特に好む味は？」
- A（ヴァータ）: 甘味・酸味・塩味（温かく重い食事を好む）
- B（ピッタ）: 甘味・苦味・渋味（冷たく爽やかな食事を好む）
- C（カパ）: 辛味・苦味・渋味（軽く刺激的な食事を好む）

**カテゴリ15: 歩き方・動作の特徴**
- 質問文: 「あなたの歩き方や動作に最も近いものは？」
- A（ヴァータ）: 速くて軽い。せかせかしている
- B（ピッタ）: 中程度で目的的。力強い歩き方
- C（カパ）: ゆっくりで優雅。どっしりしている

---

### 2. 診断ロジック

#### 2.1 スコアリング方式
- 15問の3択で、各選択肢がヴァータ/ピッタ/カパの1つに対応
- 選択されたドーシャに **+1点** を加算
- 各ドーシャの最大スコア: **15点**
- 合計スコア: 常に **15点**

#### 2.2 体質タイプ判定

**エーカ・ドーシャ（単一体質）**
- 1つのドーシャが他の2つより **4点以上** 高い場合
- 例: ヴァータ9, ピッタ4, カパ2 → 「ヴァータ体質」

**ドヴィ・ドーシャ（二重体質）**
- 上位2つのドーシャの差が **3点以内** で、3番目より **3点以上** 高い場合
- 例: ヴァータ7, ピッタ6, カパ2 → 「ヴァータ・ピッタ体質」

**トリ・ドーシャ（三重体質）**
- 3つ全てのドーシャの差が **2点以内** の場合
- 例: ヴァータ5, ピッタ5, カパ5 → 「トリ・ドーシャ体質」

**判定不能な場合（上記に当てはまらない場合）**
- 最もスコアの高いドーシャを主体質として採用
- 同点の場合は最初に該当したドーシャを採用

#### 2.3 パーセンテージ表示
- 各ドーシャのスコアを15点中の割合で表示
- 例: ヴァータ 60% / ピッタ 27% / カパ 13%

---

### 3. 出力機能

#### 3.1 ドーシャバランス表示
- 判定された体質タイプ名
  - エーカ: 「ヴァータ体質」
  - ドヴィ: 「ヴァータ・ピッタ体質」
  - トリ: 「トリ・ドーシャ体質」
- 主ドーシャの元素（風・空 / 火・水 / 水・地）
- 特徴の説明
- バランス調整アドバイス
- 各ドーシャのスコア数値 + パーセンテージのバー表示

#### 3.2 季節別ヨガポーズ提案
- 現在の季節 × 判定された主ドーシャに応じたポーズ **3個** を表示
- 各ポーズの情報:
  - ポーズ名（日本語 + サンスクリット名）
  - なぜこの季節に良いか
  - 実践のポイント

#### 3.3 時間帯別ヨガポーズ提案
- 現在の時間帯 × 判定された主ドーシャに応じたポーズ **2個** を表示
- 各ポーズの情報:
  - ポーズ名
  - なぜこの時間帯に良いか
  - 推奨実践時間

#### 3.4 食べ物アドバイス
- おすすめ食材: **7個**（食材名 + なぜ良いか）
- 控えめにする食材: **4個**（食材名 + なぜ控えるべきか）

#### 3.5 起床時間提案
- 推奨起床時刻範囲
- その時間が良い理由
- 就寝目安時刻

#### 3.6 1日の過ごし方
- 朝の過ごし方（簡潔なアドバイス）
- 昼の過ごし方（簡潔なアドバイス）
- 夜の過ごし方（簡潔なアドバイス）

---

### 4. UI/UX要件

#### 4.1 デザイン
- カラースキーム: 緑・ベージュ系の落ち着いた色調
- レイアウト: カード型（各セクションを視覚的に分離）
- フォント: sans-serif、読みやすいサイズ
- 余白: 適切なパディングとマージン

#### 4.2 レスポンシブデザイン
- モバイルファースト
- ブレークポイント: 600px
- スマートフォンでの操作性を最優先

#### 4.3 ページ構成
1. **ヘッダー**
   - タイトル「アーユルヴェーダ体質診断」
   - サブタイトル「プラクリティ診断 - 15の質問であなたの体質を知る」
2. **自動検出情報エリア**
   - 季節・時間帯の表示
3. **診断フォームエリア**
   - 進捗バー（例: 「3 / 15問」）
   - 質問カード（1問ずつ表示 or 全問一覧表示を選択可能）
   - 各質問は3択のラジオボタン形式
   - 診断ボタン（大きく目立つ）
4. **結果表示エリア（初期状態は非表示）**
   - ドーシャ判定（体質タイプ + パーセンテージ）
   - 季節別ポーズ
   - 時間帯別ポーズ
   - 食べ物アドバイス
   - 起床時間
   - 1日の過ごし方
   - リセットボタン

#### 4.4 インタラクション
- **診断ボタンクリック時:**
  - 入力バリデーション（全15問回答されているか確認）
  - 未回答の質問がある場合: 「全ての質問に回答してください（未回答: Q3, Q7, Q12）」のようにアラート
  - スコア計算
  - 結果表示エリアを表示
  - 入力フォームエリアを非表示
  - ページトップにスクロール
- **リセットボタンクリック時:**
  - 入力フォームをクリア
  - 結果エリアを非表示
  - 入力フォームエリアを表示
  - ページトップにスクロール

#### 4.5 バリデーション
- 全15問が回答されていることを確認
- 未回答の質問番号をリストアップして表示
- 未回答の質問にスクロールできるリンクを提供

---

## 知識データベース仕様

### ドーシャ基本情報
```javascript
doshas: {
  vata: {
    name: "ヴァータ",
    element: "風・空",
    characteristics: "動き、変化、乾燥、冷たさ、軽さのエネルギー。創造性と柔軟性の源。",
    balance_advice: "規則正しい生活、温かい食事、十分な休息を心がけましょう。オイルマッサージや穏やかなヨガが助けになります。"
  },
  pitta: {
    name: "ピッタ",
    element: "火・水",
    characteristics: "変換、熱、鋭さ、強さのエネルギー。知性とリーダーシップの源。",
    balance_advice: "クールダウン、適度な運動、辛すぎない食事を意識しましょう。自然の中でリラックスする時間が大切です。"
  },
  kapha: {
    name: "カパ",
    element: "水・地",
    characteristics: "安定、潤い、重さ、ゆっくりのエネルギー。忍耐力と愛情の源。",
    balance_advice: "活動的に過ごし、軽めの食事、刺激的な体験を取り入れましょう。新しい挑戦がバランスを整えます。"
  },
  vata_pitta: {
    name: "ヴァータ・ピッタ",
    element: "風・空 + 火・水",
    characteristics: "動きと変換のエネルギーが強く、創造的かつ情熱的。行動力がありますが、燃え尽きに注意。",
    balance_advice: "規則正しい食事と十分な休息を心がけ、クールダウンの時間を設けましょう。"
  },
  vata_kapha: {
    name: "ヴァータ・カパ",
    element: "風・空 + 水・地",
    characteristics: "変化と安定が共存する体質。柔軟性と忍耐力がありますが、冷えやすさに注意。",
    balance_advice: "温かい食事と適度な運動で体を温め、規則正しい生活リズムを保ちましょう。"
  },
  pitta_kapha: {
    name: "ピッタ・カパ",
    element: "火・水 + 水・地",
    characteristics: "強さと安定のエネルギー。体力と持久力に優れますが、溜め込みやすさに注意。",
    balance_advice: "軽めの食事と活発な運動を心がけ、リラックスの時間も大切にしましょう。"
  },
  tridosha: {
    name: "トリ・ドーシャ",
    element: "風・空 + 火・水 + 水・地",
    characteristics: "三つのドーシャが均等にバランスした珍しい体質。適応力が高く安定しています。",
    balance_advice: "季節や時間帯に合わせた柔軟な生活を心がけ、現在のバランスを維持しましょう。"
  }
}
```

### 質問データ構造
```javascript
questions: [
  {
    id: 1,
    category: "体格・骨格",
    question: "あなたの体型に最も近いものは？",
    options: {
      vata: "細身で華奢、骨ばっている。体重が増えにくい",
      pitta: "中肉中背で均整がとれている。筋肉がつきやすい",
      kapha: "がっしり・ふくよかで骨太。体重が増えやすい"
    }
  }
  // ...15問
]
```

### 季節別ヨガポーズデータ構造
v1と同一構造を維持

### 時間帯別ヨガポーズデータ構造
v1と同一構造を維持

### 食材データ構造
v1と同一構造を維持

### 起床時間データ構造
v1と同一構造を維持

---

## 季節別ヨガポーズ詳細データ

### 春
**ヴァータ**
1. 山のポーズ（ターダ・アーサナ）- 春の不安定さを安定させる - 大地にしっかり根を張るイメージで
2. 戦士のポーズI（ヴィーラバドラ・アーサナI）- 下半身を強化し、グラウンディング - 後ろ足のかかとをしっかり床に
3. 子どものポーズ（バーラ・アーサナ）- 心を落ち着かせる - 額を床につけて深い呼吸を

**ピッタ**
1. 前屈（パスチモッターナ・アーサナ）- 春の熱を冷ます - 無理せず、気持ち良い範囲で
2. 魚のポーズ（マツヤ・アーサナ）- 胸を開き、熱を放散 - 首に負担をかけないように
3. ねじりのポーズ - デトックス効果 - 吐く息でねじりを深める

**カパ**
1. 太陽礼拝（スーリヤ・ナマスカーラ）- 春のだるさを吹き飛ばす - 12ポーズを流れるように
2. 弓のポーズ（ダヌラ・アーサナ）- 胸を開き、エネルギー活性化 - 呼吸を止めないように
3. ねじった三角のポーズ - 消化促進とデトックス - 腰からねじる意識で

### 夏
**ヴァータ**
1. 木のポーズ（ヴリクシャ・アーサナ）- 夏の散漫さに集中力を - 一点を見つめてバランスを
2. 座位の前屈 - 落ち着きをもたらす - ゆっくりとした動き
3. シャヴァ・アーサナ（屍のポーズ）- 夏の疲れをリセット - 10〜15分しっかり休息を

**ピッタ**
1. 月礼拝（チャンドラ・ナマスカーラ）- 夏の熱を鎮める - 夕方以降に行うのが理想的
2. 肩立ちのポーズ（サルヴァンガ・アーサナ）- クーリング効果 - 首を守るためにブランケットを
3. シータリー呼吸法 - 体温を下げる - 舌を丸めて息を吸う

**カパ**
1. 逆立ち（シールシャ・アーサナ）- 夏の倦怠感を払拭 - 壁を使って安全に
2. ラクダのポーズ（ウシュトラ・アーサナ）- 胸を大きく開く - 腰を守るため、お尻を引き締めて
3. 獅子のポーズ（シンハ・アーサナ）- 喉の詰まりを解放 - 大きく「アー」と声を出して

### 秋
**ヴァータ**
1. 猫と牛のポーズ - 秋の乾燥から背骨を守る - ゆっくりとした動きで脊柱をほぐす
2. 鳩のポーズ（カポタ・アーサナ）- 股関節の柔軟性向上 - ブランケットでサポートを
3. 仰向けの合蹠（スプタ・バッダ・コーナ・アーサナ）- リラクゼーション - 10分以上キープして深いリラックスを

**ピッタ**
1. ハートオープナー系 - 秋の感情の整理 - 胸を開いて心も開放
2. ヨガニドラ（瞑想的休息）- 心の熱を冷ます - ガイド音声を使うのもおすすめ
3. 穏やかな前屈 - 内省を促す - 競争心を手放して

**カパ**
1. ダイナミックなヴィンヤサフロー - 秋の停滞を打破 - 呼吸と動きを連動させて
2. プランクポーズのバリエーション - 筋力維持 - 体幹を意識して30秒〜1分
3. ジャンプスルー・ジャンプバック - 代謝を上げる - アシュタンガヨガのトランジション

### 冬
**ヴァータ**
1. チャイルドポーズの長めキープ - 冬の不安を和らげる - 温かいブランケットをかけて
2. 脚を壁に上げるポーズ - 血行促進と安らぎ - 壁際で15〜20分
3. 優しいリストラティブヨガ - 冬の疲れを癒す - プロップスを多用して完全リラックス

**ピッタ**
1. 座位の瞑想 - 冬の内省に最適 - 背筋を伸ばして15〜30分
2. 優しいツイスト - 内臓をケア - 食後2時間以上空けて
3. アヌローマ・ヴィローマ（交互鼻呼吸）- バランス調整 - 左右5回ずつから始める

**カパ**
1. 活発な太陽礼拝 - 冬の重だるさ解消 - 朝一番に5〜10セット
2. カパーラバーティ（火の呼吸）- 代謝アップ - 空腹時に108回
3. バックベンド（後屈）系 - 胸を開き、エネルギー充填 - ウォームアップを十分に

---

## 時間帯別ヨガポーズ詳細データ

### 朝
- **ヴァータ**: 優しいストレッチ(5〜10分) / 猫と牛のポーズ(5分)
- **ピッタ**: 月礼拝(10分) / 座位の瞑想(10〜15分)
- **カパ**: 活発な太陽礼拝(15〜20分) / カパーラバーティ(3〜5分)

### 昼
- **ヴァータ**: 短い瞑想休憩(5分) / 壁を使った脚上げ(5〜10分)
- **ピッタ**: 穏やかな前屈(10分) / シータリー呼吸(3〜5分)
- **カパ**: パワーヨガ短時間(10〜15分) / 逆転のポーズ(5分)

### 夕
- **ヴァータ**: リストラティブヨガ(20〜30分) / 仰向けのツイスト(10分)
- **ピッタ**: ヨガニドラ(20〜30分) / 前屈中心の練習(15分)
- **カパ**: 中程度の強度フロー(30分) / ツイスト系(10分)

### 夜
- **ヴァータ**: ベッドヨガ(10分) / ナディ・ショーダナ(5〜10分)
- **ピッタ**: 月光浴瞑想(10〜15分) / シャヴァ・アーサナ(15〜20分)
- **カパ**: 軽いストレッチ(10分) / 呼吸法・穏やか(5分)

---

## 食材詳細データ

### ヴァータ
- **おすすめ**: 温かいスープ、根菜類、ギー、アボカド、温かいミルク、バナナ、ナッツ類
- **控える**: 生野菜サラダ、炭酸飲料、カフェイン過多、ドライフルーツ過剰

### ピッタ
- **おすすめ**: キュウリ、ココナッツ、甘いフルーツ、コリアンダー、緑葉野菜、ミントティー、豆腐
- **控える**: 辛い香辛料、揚げ物、赤身肉過剰、トマト過剰

### カパ
- **おすすめ**: 生姜、黒胡椒、緑茶、リンゴ、キノア、レモン、葉物野菜
- **控える**: 乳製品過剰、甘いデザート、揚げ物、小麦製品過剰

---

## 起床時間詳細データ

| ドーシャ | 推奨起床 | 就寝目安 |
|---------|---------|---------|
| ヴァータ | 6:00〜6:30 | 22:00〜22:30 |
| ピッタ | 5:30〜6:00 | 22:00 |
| カパ | 5:00〜5:30 | 21:30〜22:00 |

---

## 非機能要件

### パフォーマンス
- ページロード時間: 3秒以内
- 診断結果表示: 即座（1秒以内）
- ファイルサイズ: 300KB以下

### 互換性
- ブラウザ: Chrome, Safari, Firefox, Edge（最新版）
- モバイルOS: iOS 14+, Android 10+
- デスクトップOS: Windows 10+, macOS 11+

### セキュリティ
- クライアントサイドのみで動作（サーバー通信なし）
- 個人情報の保存なし
- XSS対策（入力値のサニタイズ）

### アクセシビリティ
- セマンティックHTML使用
- キーボード操作対応
- 適切なコントラスト比
- フォームラベルの明示

---

## デプロイ要件

### GitHubリポジトリ
- リポジトリ名: `ayurveda-app`
- 公開設定: Public

### Vercel設定
- Framework Preset: Other
- Build Command: なし
- Output Directory: `./`
- 環境変数: なし

---

## 制約事項
- 外部ライブラリ・フレームワーク不使用
- APIキー不使用
- サーバーサイド処理なし
- データベース不使用
- Cookie/LocalStorage不使用（診断履歴保存なし）

---

## v1からの変更点
1. **質問数**: 3問 → 15問（15カテゴリ）
2. **質問形式**: 数値入力+複数選択 → 全て3択ラジオボタン
3. **体質判定**: 単一ドーシャのみ → エーカ/ドヴィ/トリドーシャ対応
4. **スコア表示**: 数値のみ → パーセンテージ+バー表示
5. **二重体質**: 新規追加（ヴァータ・ピッタ、ヴァータ・カパ、ピッタ・カパ）
6. **三重体質**: 新規追加（トリ・ドーシャ）
7. **UI**: 進捗バー追加、未回答質問のハイライト
